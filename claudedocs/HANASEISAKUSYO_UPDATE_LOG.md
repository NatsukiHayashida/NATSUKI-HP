# 花製作所プロジェクト記事更新ログ

## 更新日: 2025-10-11

### 概要
`content/projects/hanaseisakusyo-rebuild.mdx` の全面改訂を実施。インタビューデータ（`HANASEISAKUSYO_INTERVIEW.md`）に基づき、正確な情報とバランスの取れたトーンで記事を完成させた。

---

## 更新プロセス

### Phase 1: インタビューデータ確認
**参照ファイル**: `claudedocs/HANASEISAKUSYO_INTERVIEW.md`

**重要な発見**:
- 会員数: 800名 → **2,658名**（正確な数値）
- 商品点数: 1,200点 → **4,306点**（正確な数値）
- プロジェクト期間: **2025年内移行予定**（現在は計画・準備中）
- 在庫バグ: **3件発生**（2024年7-9月、返金対応実施）
- EC-CUBE: **Xserverが提供する構築サービスを利用**
- 開発環境: **平日フルタイム勤務 + 夜・週末開発**
- AI活用: **Claude/ChatGPTと協働**

### Phase 2: 初回全面改訂
**タイトル**: 「EC-CUBEからNext.js+Supabaseへ ― AIと築く堅牢ECサイト移行記」

**主な内容**:
- 在庫バグの詳細（段階的ロック設計で解決）
- データ規模の正確な記載
- 技術的ソリューション詳述
- AI協働開発手法

**ユーザーフィードバック①**: 6つの改善点
1. タイトルをより短く、視認性向上
2. 冒頭の感情的フック強化
3. データ成長のストーリー性追加
4. 技術的解決策の読みやすさ改善
5. AIナラティブ強化
6. 結論でのブランディング強化

### Phase 3: 第2次改訂
**改善内容**:
- タイトル短縮化
- 感情的フック追加: 「花を届けるはずのECサイトが、逆に「信用問題」を生んでしまった。」
- 成長ストーリー: 「会員数は800名から2,658名へ、商品点数も1,200点から4,306点へ」
- 技術ソリューションの再構成
- AI協働ナラティブ強化

**ユーザーフィードバック②**: 4つの重要修正
1. 具体的な返金額を削除
2. EC-CUBEがXserverのサービスであることを明記
3. 有料サービスなのにバグがあることへの不満表明
4. 夜・週末開発がAIで可能になったことを強調

### Phase 4: 第3次改訂
**重要な修正**:
- 返金額テーブルから具体的金額削除
- Xserver EC-CUBEサービスのセクション追加
- 有料サービスへの不満表明: 「月額のショップサービス料を支払っているのに、なぜこのような致命的なバグが起きるのか」
- AI協働時間の明記: 「平日夜: 2-3時間、週末: 5-10時間」

**ユーザーフィードバック③**: 完全リライト提供
- **トーン変更**: 批判的 → バランスの取れた共感的トーン
- **サービス評価**: 批判なし、互換性問題に焦点
- **良い点の認識**: 既存サービスの良さも認める
- **見出し改善**: より会話的でフレンドリーに
- **TL;DR追加**: 要約セクション
- **新タイトル**: 「わが家のECリニューアル記」

### Phase 5: 第4次完全リライト
**実装内容**: ユーザー提供版を完全実装

**主要な変更点**:
```markdown
前置き追加:
「今回のトラブルは、サービス側の品質だけが原因ではありません。
うちの販売手法（販売開始時にアクセスが集中する運用）との相性もあり、
結果として在庫の不整合が起きてしまいました。」

既存サービスの評価:
「既存のサービス自体は、一般的な用途では十分に満足できる点も多かったと思います。」
```

### Phase 6: 最終調整（2025-10-11）
**細かな修正**:

1. **見出し変更**:
   - 変更前: 「家の商いを、ちゃんと守れる仕組みにしたい」
   - 変更後: **「安心して使えるECへ」**

2. **花製作所の明記**:
   - 追加: 「花製作所」（以下、**花製作所**）
   - 理由: 後続の文章での参照を明確化

3. **EC-CUBE表記の正確化**:
   - 変更前: 「EC-CUBE（Xserverの構築サービス）」
   - 変更後: **「EC-CUBE（Xserverが提供する構築サービスを利用）」**
   - 理由: Xserverが提供するサービスであることを明確化

---

## 最終記事構成

### フロントマター
```yaml
title: "EC-CUBEからNext.js + Supabaseへ ― AIと進める、わが家のECリニューアル記"
date: "2025-01-15"
excerpt: "妻のフラワーショップのECを、EC-CUBE（Xserverの構築サービス）からNext.js + Supabaseへ段階的に移行。販売開始時のアクセス集中と在庫競合という、うちの運用特性に合わせた仕組みづくりに挑戦しています。"
category: "Web制作 / ECサイト構築"
tags: ["Next.js", "Supabase", "E-commerce", "Migration", "AI-Assisted Development", "Inventory Management"]
```

### 主要セクション
1. **はじめに ― 安心して使えるECへ**
   - 花製作所の明記
   - バランスの取れた前置き
   - EC-CUBEサービスの正確な記載

2. **TL;DR**
   - 目的、方針、配慮、働き方、目標

3. **背景と現状**
   - 会員: 2,658名
   - 商品: 4,306点
   - 販売スタイル: 月2回、同時200アクセス

4. **なぜ移行するのか**
   - 課題の再発防止
   - 運用のカスタマイズ
   - 心理的コストの削減

5. **技術的アプローチ**
   - 段階的ロック（ソフト → ハード → トランザクション）
   - Supabase Realtimeによる在庫同期
   - 同時200アクセス対応設計
   - 高齢者向けUI（40-60代）

6. **AIとの付き合い方**
   - 夜・週末開発の実現
   - AI協働の3原則
   - 具体的な活用方法

7. **KPI・データ移行・管理画面・コスト**
   - 購入トラブルゼロ化
   - 会員2,658名の移行戦略
   - React Admin実装
   - 年間10万円以内

8. **まとめ**
   - 責任の所在を明確化
   - 証明できるスキル一覧
   - 同じ悩みを持つEC事業者へのメッセージ

---

## 技術的ハイライト

### 在庫管理ロジック
```typescript
CREATE TABLE inventory (
  id UUID PRIMARY KEY,
  product_id UUID NOT NULL,
  status TEXT CHECK (status IN ('available', 'soft_locked', 'hard_locked', 'sold')),
  locked_by UUID REFERENCES users(id),
  locked_at TIMESTAMP,
  lock_expires_at TIMESTAMP
);
```

**段階的ロック**:
| フェーズ | ロック種別 | 時間 | 解除条件 |
|---------|----------|------|---------|
| カート投入 | ソフトロック | 2-3分 | タイムアウト or 削除 |
| 購入手続き | ハードロック | 5分 | 決済完了 or タイムアウト |
| 決済処理中 | トランザクションロック | 30-60秒 | 成功 or 失敗 |

### リアルタイム在庫同期
```typescript
const channel = supabase
  .channel('inventory_changes')
  .on('postgres_changes', {
    event: 'UPDATE',
    schema: 'public',
    table: 'inventory'
  }, (payload) => {
    updateProductUI(payload.new)
  })
  .subscribe()
```

### パフォーマンス対策
- Next.js ISR（商品一覧の静的生成）
- Supabase Pro（同時接続200対応）
- Vercel Edge Network（静的コンテンツ配信）

---

## AI協働開発手法

### 3原則
1. **判断は自分、実装はAI**
   - 設計判断・技術選定は人間
   - コード生成・実装はAI支援

2. **検証は必須**
   - AIコードも必ずレビュー・テスト
   - 品質基準は妥協しない

3. **責任は自分**
   - 最終的な品質・運用責任は開発者
   - AIは「思考のパートナー」

### 活用実績
**Claudeに依頼したこと**:
- 設計レビュー（在庫管理ロジック検証）
- コード生成（Supabase RPC、Realtime実装）
- 技術選定相談（tRPC vs Server Actions等）
- ドキュメント作成

**自分が担う責任**:
- 最終判断
- 品質保証（テスト、負荷テスト）
- ビジネス要件理解
- 運用責任

---

## トーン変遷の記録

### 初期版（批判的トーン）
- EC-CUBEの問題点を強調
- 有料サービスへの不満表明
- 返金額の具体的記載

### 最終版（バランスの取れたトーン）
- サービスと運用の相性問題に焦点
- 既存サービスの良い点も認める
- 建設的な問題解決アプローチ
- 共感的で親しみやすい表現

**重要な姿勢転換**:
> 「今回のトラブルは、サービス側の品質だけが原因ではありません。
> うちの販売手法（販売開始時にアクセスが集中する運用）との相性もあり、
> 結果として在庫の不整合が起きてしまいました。」

---

## 記事の価値提案

### ポートフォリオとしての強み
1. **実ビジネス課題の解決**: 理論ではなく実際の運用問題
2. **データ規模の実績**: 会員2,658名、商品4,306点
3. **AI時代の開発手法**: Claude/ChatGPT協働の実践例
4. **フルスタック実装**: Next.js + Supabase + React Admin
5. **ビジネス理解**: 高齢者UX、運用効率、コスト最適化
6. **働き方の実現**: フルタイム勤務 + 夜・週末開発

### 同業者への価値
- 在庫管理の不安定さに悩むEC事業者
- アクセス集中時の問題対策
- 高齢者向けUX改善
- 少人数運用の効率化
- AI活用での開発コスト削減

---

## ファイル更新履歴

### 更新ファイル
- `/Users/hayashidanatsuki/MyProject/163/natsuki-hp/content/projects/hanaseisakusyo-rebuild.mdx`

### 主要な変更点（最終版）
1. **行29**: 見出し変更 → 「安心して使えるECへ」
2. **行31**: 花製作所明記 → 「（以下、**花製作所**）」
3. **行32**: EC-CUBE表記 → 「Xserverが提供する構築サービスを利用」

### 参照ファイル
- `claudedocs/HANASEISAKUSYO_INTERVIEW.md` - インタビュー記録
- `content/projects/hanaseisakusyo-rebuild.mdx` - プロジェクト記事

---

## 次のステップ

### 記事公開後のアクション
- [ ] 実際の開発進捗に応じて更新
- [ ] Phase 1完了時: プロトタイプのスクリーンショット追加
- [ ] Phase 2完了時: 実装詳細の追記
- [ ] Phase 3完了時: データ移行結果の報告
- [ ] Phase 4完了時: 本番移行の振り返り

### 他プロジェクトへの展開
- [ ] Savvybot等の他プロジェクトもインタビュー実施
- [ ] 同様の詳細度で記事更新
- [ ] ポートフォリオ全体の一貫性向上

---

## 学び・気づき

### 記事作成プロセスから
1. **正確なデータの重要性**: 推定値ではなく実数値を使用
2. **トーンのバランス**: 批判ではなく建設的な問題解決姿勢
3. **ユーザー視点**: 読者（採用担当者、同業者）への価値提供
4. **技術と人間性の両立**: 技術詳細と共感的ストーリー

### AI協働開発から
1. **時間制約の克服**: 夜・週末でも実現可能な開発
2. **判断と実装の分離**: 人間が考え、AIが支援
3. **継続的学習**: 実装しながら理解を深める

---

**最終更新**: 2025-10-11
**記事URL**: `/projects/hanaseisakusyo-rebuild`
**ステータス**: ✅ 完成（今後は実装進捗に応じて更新）
